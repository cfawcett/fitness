{{ block "header" . }}{{ end }}

<div class="flex h-screen bg-zinc-900 text-zinc-200 md:ml-64">
    <main id="content" class="flex-1 overflow-y-auto {{ if .ActiveWorkoutID }}pb-32 md:pb-20{{ else }}pb-24 md:pb-8{{ end }}">

        <div class="border-b border-cyan-500 bg-zinc-800 text-white shadow-sm md:hidden">
            <div class="mx-auto max-w-4xl px-4 py-6">
                <div class="flex items-center space-x-4">
                    <img class="h-16 w-16 rounded-full border-4 border-cyan-700" src="{{ .User.ProfilePictureUrl}}" alt="Profile"/>
                    <div>
                        <h1 class="text-2xl font-bold text-white">Welcome back, {{ .User.FirstName }}!</h1>
                        <p class="text-white">Ready for your next workout?</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="mx-auto max-w-5xl px-4 py-8 sm:px-6 lg:px-8">

            <div class="mb-8 rounded-xl border border-cyan-700 bg-zinc-800 p-6 shadow-sm">
                <h2 class="mb-4 text-lg font-semibold text-white">Quick Actions</h2>
                <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
                    <button hx-post="/workouts/new"
                            hx-target="body"
                            hx-swap="beforeend"
                            class="flex items-center justify-center rounded-lg bg-cyan-700 p-4 text-white shadow-lg transition-all duration-200 hover:scale-105 hover:bg-cyan-800">
                        <svg class="mr-3 h-6 w-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                        <span class="font-semibold">Start New Workout</span>
                    </button>
                    <button class="flex items-center justify-center rounded-lg bg-cyan-700 p-4 text-white shadow-lg transition-all duration-200 hover:scale-105 hover:bg-cyan-800">
                        <svg class="mr-3 h-6 w-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        <span class="font-semibold">Track Run</span>
                    </button>
                </div>
            </div>

            <div class="rounded-xl border border-cyan-700 bg-zinc-800 shadow-sm">
                <div class="border-b border-cyan-700 p-6">
                    <h2 class="text-lg font-semibold text-white">Recent Workouts</h2>
                    <p class="mt-1 text-sm text-zinc-200">Your latest fitness activities</p>
                </div>
                <div>
                    {{ if .ActivityList }}
                        <div class="divide-y divide-cyan-700/40 md:hidden">
                            {{ range .ActivityList }}
                                <div class="activity-item flex items-center justify-between gap-2 p-6">
                                    <a href="/workouts/{{ .ID }}" class="flex min-w-0 flex-grow items-center gap-4">
                                        <div class="shrink-0 text-cyan-400">
                                            {{ if eq .Type "GYM_WORKOUT" }}
                                                <svg class="size-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.09118 8H9.36418C9.72392 8.00873 10.0086 8.30725 10.0002 8.667V15.333C10.0086 15.6927 9.72392 15.9913 9.36418 16H8.09118C7.73144 15.9913 7.4468 15.6927 7.45518 15.333V14H5.63618C5.27644 13.9913 4.9918 13.6927 5.00018 13.333V10.667C4.9918 10.3073 5.27644 10.0087 5.63618 10H7.45518V8.667C7.4468 8.30725 7.73144 8.00873 8.09118 8Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.9092 16H14.6362C14.2764 15.9913 13.9918 15.6927 14.0002 15.333V8.667C13.9918 8.30725 14.2764 8.00873 14.6362 8H15.9092C16.2689 8.00873 16.5536 8.30725 16.5452 8.667V10H18.3632C18.5361 10.0039 18.7004 10.0764 18.8199 10.2015C18.9393 10.3266 19.0042 10.4941 19.0002 10.667V13.333C19.0086 13.6927 18.7239 13.9913 18.3642 14H16.5452V15.333C16.5536 15.6927 16.2689 15.9913 15.9092 16Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                            {{ end }}
                                        </div>
                                        <div class="min-w-0 flex-1">
                                            <p class="truncate font-semibold text-white">{{ .Name }}</p>
                                            <p class="text-sm text-zinc-400">{{ .ActivityTime.Format "Jan 2, 2006" }}</p>
                                        </div>
                                        <div class="shrink-0">
                                            {{ if eq .Status "draft" }}
                                                <span class="inline-flex items-center rounded-full bg-zinc-500/20 px-3 py-1 text-xs font-semibold capitalize text-zinc-300">{{ .Status }}</span>
                                            {{ else }}
                                                <span class="inline-flex items-center rounded-full bg-cyan-500/20 px-3 py-1 text-xs font-semibold capitalize text-cyan-300">{{ .Status }}</span>
                                            {{ end }}
                                        </div>
                                    </a>
                                    <form hx-post="/activity/{{ .ID }}/delete" hx-confirm="Are you sure you want to delete this workout?" hx-target="closest .activity-item" hx-swap="outerHTML">
                                        <button type="submit" class="shrink-0 rounded-md p-2 text-zinc-500 transition-colors hover:bg-red-500/10 hover:text-red-400">
                                            <svg class="size-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" /></svg>
                                        </button>
                                    </form>
                                </div>
                            {{ end }}
                        </div>
                        <div class="hidden space-y-4 p-4 md:block">
                            {{ range .ActivityList }}
                                <div class="activity-item flex items-center justify-between gap-4 rounded-lg border border-cyan-700/40 bg-zinc-900/50 p-4 transition-colors duration-150 hover:bg-zinc-700/60">
                                    <a href="/workouts/{{ .ID }}" class="flex min-w-0 flex-grow items-center gap-4">
                                        <div class="shrink-0 text-cyan-400">
                                            {{ if eq .Type "GYM_WORKOUT" }}
                                                <svg class="size-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.09118 8H9.36418C9.72392 8.00873 10.0086 8.30725 10.0002 8.667V15.333C10.0086 15.6927 9.72392 15.9913 9.36418 16H8.09118C7.73144 15.9913 7.4468 15.6927 7.45518 15.333V14H5.63618C5.27644 13.9913 4.9918 13.6927 5.00018 13.333V10.667C4.9918 10.3073 5.27644 10.0087 5.63618 10H7.45518V8.667C7.4468 8.30725 7.73144 8.00873 8.09118 8Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.9092 16H14.6362C14.2764 15.9913 13.9918 15.6927 14.0002 15.333V8.667C13.9918 8.30725 14.2764 8.00873 14.6362 8H15.9092C16.2689 8.00873 16.5536 8.30725 16.5452 8.667V10H18.3632C18.5361 10.0039 18.7004 10.0764 18.8199 10.2015C18.9393 10.3266 19.0042 10.4941 19.0002 10.667V13.333C19.0086 13.6927 18.7239 13.9913 18.3642 14H16.5452V15.333C16.5536 15.6927 16.2689 15.9913 15.9092 16Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                            {{ end }}
                                        </div>
                                        <div class="min-w-0 flex-1">
                                            <p class="truncate font-semibold text-white">{{ .Name }}</p>
                                            <p class="text-sm text-zinc-400">{{ .ActivityTime.Format "15:04" }}</p>
                                            <p class="text-sm text-zinc-400">{{ .ActivityTime.Format "Jan 2, 2006" }}</p>
                                        </div>
                                        <div class="shrink-0">
                                            {{ if eq .Status "draft" }}
                                                <span class="inline-flex items-center rounded-full bg-zinc-500/20 px-3 py-1 text-xs font-semibold capitalize text-zinc-300">{{ .Status }}</span>
                                            {{ else }}
                                                <span class="inline-flex items-center rounded-full bg-cyan-500/20 px-3 py-1 text-xs font-semibold capitalize text-cyan-300">{{ .Status }}</span>
                                            {{ end }}
                                        </div>
                                    </a>
                                    <form hx-delete="/activity/{{ .ID }}" hx-confirm="Are you sure you want to delete this workout?" hx-target="closest .activity-item" hx-swap="outerHTML">
                                        <button type="submit" class="shrink-0 rounded-md p-2 text-zinc-500 transition-colors hover:bg-red-500/10 hover:text-red-400">
                                            <svg class="size-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" /></svg>
                                        </button>
                                    </form>
                                </div>
                            {{ end }}
                        </div>
                    {{ else }}
                        <div class="p-6 text-center text-zinc-400">
                            <button hx-post="/workouts/new"
                                    hx-target="body"
                                    hx-swap="beforeend"
                                    class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-zinc-700 transition-colors hover:bg-zinc-600">
                                <svg class="h-8 w-8 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                            </button>
                            <h3 class="mb-2 text-sm font-medium text-white">No workouts yet</h3>
                            <p class="mb-4 text-sm">Start your fitness journey by creating your first workout.</p>
                            <button hx-post="/workouts/new"
                                    hx-target="body"
                                    hx-swap="beforeend"
                                    class="inline-flex items-center rounded-md border border-cyan-500 bg-cyan-700 px-4 py-2 font-medium text-white hover:bg-cyan-800">
                                Start Your First Workout
                            </button>
                        </div>
                    {{ end }}
                </div>
            </div>
        </div>
    </main>
</div>

{{ if .ActiveWorkoutID }}
    <div class="fixed bottom-28 left-4 right-4 z-50 md:bottom-0 md:left-64 md:right-0 md:rounded-none">
        <div class="mx-auto flex w-full items-center gap-4 rounded-xl border border-cyan-700 bg-zinc-800 px-6 py-4 text-white shadow-lg md:rounded-none md:border-r-0 md:border-b-0">
            <svg class="mr-2 h-8 w-8 shrink-0 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M12 20a8 8 0 100-16 8 8 0 000 16z" /></svg>
            <div class="min-w-0 flex-1">
                <p class="truncate font-semibold">You have an active workout in progress.</p>
            </div>
            <a href="/workouts/{{ .ActiveWorkoutID }}/edit" class="ml-auto inline-flex shrink-0 items-center rounded-md border border-cyan-700 bg-cyan-700 px-4 py-2 font-semibold text-white shadow transition-colors hover:bg-cyan-600">Return</a>
            <form method="POST" action="/activity/{{ .ActiveWorkoutID }}/discard" hx-post="/activity/{{ .ActiveWorkoutID }}/discard" hx-target="body">
                <button type="submit" class="inline-flex shrink-0 items-center rounded-md border border-red-600 bg-red-600 px-4 py-2 font-semibold text-white shadow transition-colors hover:bg-red-700">Discard</button>
            </form>
        </div>
    </div>
{{ end }}

{{ block "navbar" . }}{{ end }}