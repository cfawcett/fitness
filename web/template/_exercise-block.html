{{ $gymExercise := .GymExercise }}
{{ $activityID := .ActivityID }}

<div id="exercise-block-{{$gymExercise.ID}}" class="exercise-block p-4">

    <div class="flex items-center gap-4 mb-6">
        <img src="{{ or $gymExercise.ExerciseDefinition.ImageUrlStart "/static/placeholder.jpg" }}"
        alt="{{ $gymExercise.ExerciseDefinition.Name }}"
        class="size-16 rounded-md object-cover border-2 border-zinc-700">

        <div class="flex-grow">
            {{ if $gymExercise.SupersetWithID }}
            <div class="flex items-center gap-1.5 text-xs text-cyan-400 mb-1 font-semibold">
                <svg class="size-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.881.75.75 0 0 0 1.28-.53l-.225-5.881 3-3Z" /><path d="m7.768 15.768-3-3a4 4 0 0 1 5.656-5.656l1.225 1.224a.75.75 0 0 0 1.06-1.06l-1.224-1.224a2.5 2.5 0 0 0-3.535-3.536l-3 3a2.5 2.5 0 0 0 0 3.536l3 3a2.5 2.5 0 0 0 3.536 0 .75.75 0 0 0-1.06-1.06a1 1 0 0 1-1.414 0Z" /></svg>
                <span>SUPERSET</span>
            </div>
            {{ end }}
            <h3 class="text-xl font-bold text-white">{{ $gymExercise.ExerciseDefinition.Name }}</h3>
        </div>

        <button type="button"
                hx-delete="/gym-exercise/{{$gymExercise.ID}}"
                hx-confirm="Are you sure you want to delete this exercise and all its sets?"
                class="text-zinc-500 hover:text-red-500">
            <svg class="size-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" /></svg>
        </button>
    </div>

    <div id="sets-container-{{$gymExercise.ID}}" class="flex flex-col space-y-4">
        {{ range $gymExercise.Sets }}
        {{ template "_exercise-set.html" (dict "Set" . ) }}
        {{ end }}
    </div>

    <div class="mt-6 flex flex-wrap items-center justify-end gap-3">
        {{ if not (index .ParentIDs $gymExercise.ID) }}
        <button type="button"
                hx-get="/ui/add-exercise-modal/{{$activityID}}?sourceExerciseID={{$gymExercise.ID}}"
                hx-target="#modal-container"
                hx-swap="innerHTML"
                class="flex items-center gap-2 rounded-full bg-zinc-800 px-4 py-2 text-sm font-semibold text-cyan-400 transition hover:bg-zinc-700">
            <svg class="size-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.881.75.75 0 0 0 1.28-.53l-.225-5.881 3-3Z" /><path d="m7.768 15.768-3-3a4 4 0 0 1 5.656-5.656l1.225 1.224a.75.75 0 0 0 1.06-1.06l-1.224-1.224a2.5 2.5 0 0 0-3.535-3.536l-3 3a2.5 2.5 0 0 0 0 3.536l3 3a2.5 2.5 0 0 0 3.536 0 .75.75 0 0 0-1.06-1.06a1 1 0 0 1-1.414 0Z" /></svg>
            Add Superset
        </button>
        {{ end }}

        <button type="button"
                hx-post="/gym-exercise/{{$gymExercise.ID}}/add-set"
                hx-target="#sets-container-{{$gymExercise.ID}}"
                hx-swap="beforeend"
                class="flex items-center gap-2 rounded-full bg-cyan-700/20 px-4 py-2 text-sm font-semibold text-cyan-300 transition hover:bg-cyan-700/30">
            <svg class="size-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" /></svg>
            Add Set
        </button>
    </div>
</div>